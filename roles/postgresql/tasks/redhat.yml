---

- name: exclude postgre stuff from the base repos
  lineinfile: "dest=/etc/yum.repos.d/CentOS-Base.repo state=present regexp='^[base]' insertafter='^gpgkey=*' line='exclude=postgresql*'"
  tags:
    - postgre-sql
    - packages

- lineinfile: "dest=/etc/yum.repos.d/CentOS-Base.repo state=present regexp='^[updates]' insertafter='^gpgkey=*' line='exclude=postgresql*'"
  tags:
    - postgre-sql
    - packages

- name: Install PostgreSQL repo
  yum: name={{ postgre_repo_url }} state=present
  when: ansible_os_family == "RedHat"
  tags:
    - postgre-sql
    - repo
